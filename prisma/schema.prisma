generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model bookmark {
  idMark  Int   @id @default(autoincrement())
  mangaId Int
  userId  Int
  manga   manga @relation(fields: [mangaId], references: [idManga], map: "Bookmark_mangaId_fkey")
  users   users @relation(fields: [userId], references: [id], map: "Bookmark_userId_fkey")

  @@index([mangaId], map: "Bookmark_mangaId_fkey")
  @@index([userId], map: "Bookmark_userId_fkey")
}

model chapter {
  idChapter    Int      @id @default(autoincrement())
  mangaId      Int
  judulChapter String   @db.VarChar(255)
  chapter      Int
  published_at DateTime @default(now())
  image        String   @db.LongText
  manga        manga    @relation(fields: [mangaId], references: [idManga], map: "Chapter_mangaId_fkey")

  @@index([mangaId], map: "Chapter_mangaId_fkey")
}

model genre {
  idGenre                  Int     @id @default(autoincrement())
  genre                    String  @db.VarChar(144)
  manga_manga_genreTogenre manga[] @relation("manga_genreTogenre")
}

model manga {
  idManga                  Int        @id @default(autoincrement())
  mangaTitle               String     @db.VarChar(255)
  cover                    String     @db.VarChar(144)
  deskripsi                String     @db.LongText
  published_at             DateTime   @default(now())
  slug                     String     @db.VarChar(255)
  genre                    Int        @default(4)
  bookmark                 bookmark[]
  chapter                  chapter[]
  genre_manga_genreTogenre genre      @relation("manga_genreTogenre", fields: [genre], references: [idGenre], map: "Manga_genre_fkey")

  @@index([genre], map: "Manga_genre_fkey")
}

model users {
  id       Int        @id @default(autoincrement())
  username String     @db.VarChar(144)
  email    String     @db.VarChar(100)
  password String     @db.VarChar(255)
  role     String?    @default("user")
  bookmark bookmark[]
}
